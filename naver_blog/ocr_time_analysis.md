# 이미지/동영상 OCR 처리 시간 분석

## 현재 크롤링 시간
- **게시물당 평균**: 약 5-7초
- **100개 크롤링**: 약 8-12분

## OCR 처리 시간 추정

### 1. 이미지 OCR (EasyOCR)

#### 처리 시간
- **초기화 (1회)**: 2-3초 (GPU 사용 시 1-2초)
- **이미지당 OCR**: 
  - CPU: 1-3초
  - GPU (M1/M2 Mac): 0.5-1초
  - 고해상도 이미지: 2-5초

#### 게시물당 예상
- 평균 이미지 3-5개 가정
- **CPU**: 3-15초 추가 (평균 9초)
- **GPU**: 1.5-5초 추가 (평균 3초)

#### 100개 크롤링 시
- **현재**: 8-12분
- **CPU OCR 추가**: 23-37분 (약 3배 증가)
- **GPU OCR 추가**: 11-17분 (약 1.5배 증가)

### 2. 동영상 첫 프레임 OCR

#### 처리 시간
- **첫 프레임 추출**: 0.5-1초
- **OCR 처리**: 이미지와 동일 (0.5-3초)
- **게시물당**: 1-4초 추가 (동영상 1-2개 가정)

#### 100개 크롤링 시
- **추가 시간**: 2-7분

### 3. 전체 OCR 처리 (이미지 + 동영상)

#### CPU 사용 시
```
현재: 8-12분
+ 이미지 OCR: 15-25분
+ 동영상 OCR: 2-7분
= 총 25-44분 (약 3-4배 증가)
```

#### GPU 사용 시 (M1/M2 Mac)
```
현재: 8-12분
+ 이미지 OCR: 5-8분
+ 동영상 OCR: 1-3분
= 총 14-23분 (약 1.5-2배 증가)
```

## 권장 방안

### 방안 1: 실시간 OCR (크롤링 중)
**장점:**
- 한 번에 모든 작업 완료
- 별도 스크립트 불필요

**단점:**
- 크롤링 시간 2-4배 증가
- 네트워크/OCR 오류 시 전체 중단 위험
- 메모리 사용량 증가

**추천 상황:**
- 소량 데이터 (10-50개)
- GPU 사용 가능
- 즉시 결과 필요

### 방안 2: 분리 처리 (권장)
**장점:**
- 크롤링 속도 유지
- OCR 실패 시 재시도 용이
- 병렬 처리 가능
- 선택적 OCR 가능 (중요 이미지만)

**단점:**
- 2단계 프로세스 필요
- 이미지 다운로드 별도 필요

**추천 상황:**
- 대량 데이터 (100개 이상)
- 안정성 중요
- 배치 처리 가능

### 방안 3: 하이브리드
- 크롤링: URL만 수집
- 후처리: 
  1. 중요도 필터링 (좋아요/댓글 많은 게시물)
  2. 선택적 OCR
  3. GPU 병렬 처리

## 구현 예시

### 실시간 OCR 추가 시
```python
# 이미지 OCR 추가
def extract_media_with_ocr(driver, soup):
    import easyocr
    reader = easyocr.Reader(['ko', 'en'], gpu=True)  # M1/M2 Mac
    
    image_data = []
    for img in soup.select('img'):
        src = img.get('src')
        if src:
            # 이미지 다운로드
            response = requests.get(src, headers={'Referer': driver.current_url})
            # OCR 처리
            result = reader.readtext(response.content)
            text = ' '.join([item[1] for item in result])
            image_data.append({'url': src, 'text': text})
    
    return image_data
```

### 게시물당 예상 시간
- 기존: 5-7초
- OCR 추가 (GPU): 8-11초
- OCR 추가 (CPU): 14-22초

## 최종 권장사항

### 현재 단계 (100개 크롤링)
**방안 2 (분리 처리) 권장**
1. 크롤링: URL만 수집 (8-12분)
2. 후처리: 별도 OCR 스크립트 (10-20분)
3. 총 시간: 18-32분

### 향후 대량 크롤링 (1000개+)
**방안 3 (하이브리드) 권장**
1. 전체 크롤링: URL만 (80-120분)
2. 필터링: 좋아요 10개 이상만 (30-50%)
3. 선택적 OCR: GPU 병렬 처리 (30-60분)
4. 총 시간: 110-180분

## 결론
- **소량 + GPU**: 실시간 OCR 가능 (1.5-2배 시간)
- **대량 또는 CPU**: 분리 처리 권장
- **최적**: URL 수집 → 필터링 → 선택적 OCR
